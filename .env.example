##################################################################
# Unified .env — Mayan EDMS + Hybrid RAG + Langfuse
#
# This file is used by docker-compose.yml for:
#   1. Compose-level variable interpolation (${VAR} in YAML)
#   2. env_file injection into Mayan and RAG containers
#
# Copy to .env and fill in real secrets before first run:
#   cp .env.example .env
##################################################################


# ============================================================
# DOCKER COMPOSE SETTINGS
# ============================================================

# Project name — determines the network name (mayan_mayan)
COMPOSE_PROJECT_NAME=mayan

# Default profiles to activate.
# Add "ollama" to use a local LLM, "elasticsearch" for full-text search.
COMPOSE_PROFILES=all_in_one,postgresql,rabbitmq,redis


# ============================================================
# MAYAN EDMS
# ============================================================

# Docker image
MAYAN_DOCKER_IMAGE_NAME=mayanedms/mayanedms
MAYAN_DOCKER_IMAGE_TAG=s4.10

# Database (change before first run)
# MAYAN_DATABASE_HOST=
# MAYAN_DATABASE_NAME=
# MAYAN_DATABASE_PASSWORD=
# MAYAN_DATABASE_USER=

# Elasticsearch
MAYAN_ELASTICSEARCH_PASSWORD=mayanespassword

# RabbitMQ
# MAYAN_RABBITMQ_USER=
# MAYAN_RABBITMQ_PASSWORD=
# MAYAN_RABBITMQ_VHOST=

# Redis
# MAYAN_REDIS_PASSWORD=

# Frontend port
# MAYAN_FRONTEND_HTTP_PORT=80

# Custom worker queues
MAYAN_WORKER_CUSTOM_QUEUE_LIST=

# Services to wait for on startup
MAYAN_DOCKER_WAIT="postgresql:5432 rabbitmq:5672 redis:6379"

# APT packages to install in Mayan container (OCR languages, etc.)
MAYAN_APT_INSTALLS=tesseract-ocr-eng tesseract-ocr-ron tesseract-ocr-deu

# --- Traefik (leave defaults unless using reverse proxy) ---
MAYAN_TRAEFIK_LETS_ENCRYPT_EMAIL=
MAYAN_TRAEFIK_EXTERNAL_DOMAIN=
MAYAN_TRAEFIK_DASHBOARD_ENABLE=false
MAYAN_TRAEFIK_DASHBOARD_AUTHENTICATION=''
MAYAN_TRAEFIK_FRONTEND_ENABLE=false
MAYAN_TRAEFIK_RABBITMQ_ENABLE=false
MAYAN_TRAEFIK_LETS_ENCRYPT_DNS_CHALLENGE_PROVIDER=

# --- Mirrors ---
MAYAN_MIRROR_INDEX_NAME=
MAYAN_MIRROR_CABINET_NAME=


# ============================================================
# RAG SERVER
# ============================================================

# Qdrant (local container, no auth needed)
QDRANT_ENDPOINT=http://qdrant:6333
# QDRANT_API_KEY=

# LLM backend — switch between "OLLAMA" and "AZURE_OPENAI"
MODEL_TO_USE=AZURE_OPENAI

# Ollama (when MODEL_TO_USE=OLLAMA)
OLLAMA_URL=http://ollama:11434
OLLAMA_MODEL=qwen2.5:3b

# Azure OpenAI (when MODEL_TO_USE=AZURE_OPENAI)
AZURE_OPENAI_ENDPOINT=https://YOUR_RESOURCE.openai.azure.com/
AZURE_OPENAI_API_KEY=your-azure-key-here
AZURE_OPENAI_DEPLOYMENT=gpt-4o-mini
AZURE_OPENAI_API_VERSION=2024-06-01

# Mayan connection (RAG → Mayan API)
MAYAN_URL=http://app:8000
MAYAN_API_TOKEN=your-mayan-api-token
WEBHOOK_SECRET=your-webhook-secret


# ============================================================
# LANGFUSE — Observability
# ============================================================

# API keys (auto-initialized on first boot)
LANGFUSE_PUBLIC_KEY=pk-lf-local-dev-public
LANGFUSE_SECRET_KEY=sk-lf-local-dev-secret
LANGFUSE_HOST=http://langfuse-web:3000

# Langfuse internal secrets
LANGFUSE_NEXTAUTH_SECRET=changeme-nextauth-secret
LANGFUSE_SALT=changeme-salt-value
LANGFUSE_ENCRYPTION_KEY=0000000000000000000000000000000000000000000000000000000000000000

# Langfuse admin user
LANGFUSE_INIT_EMAIL=admin@local.dev
LANGFUSE_INIT_USER=Admin
LANGFUSE_INIT_PASSWORD=admin1234

# Langfuse backing services
LANGFUSE_CH_PASSWORD=clickhouse
LANGFUSE_MINIO_PASSWORD=miniosecret
LANGFUSE_REDIS_PASSWORD=langfuse-redis-secret
