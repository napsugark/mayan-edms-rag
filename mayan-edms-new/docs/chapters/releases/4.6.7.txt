Version 4.6.7
=============

Released: August 11, 2025


Summary
-------

Version 4.6.7 delivers a series of improvements to **Mayan Forge** and **Docker Compose configuration flexibility**, alongside minor bug fixes and developer tooling enhancements. This release adds new local configuration file support, improves PIP index handling and caching for faster builds, and ensures more graceful error handling in backend imports. It also includes updates to the `settings_show` management command and streamlines Docker Compose configuration for better maintainability.


Changes
-------

Mayan Forge
^^^^^^^^^^^

- Fixed the `forge-shell` target to ensure reliable shell access to the Forge development environment.
- Added the `squid-deb-proxy-client` package to the Forge container image for improved package retrieval performance in proxied environments.
- Added support for an optional `.env-local` file for Forge, enabling environment-specific overrides without affecting the main `.env` file.
- Added `.env-local` to `.gitignore` to avoid accidental commits of local overrides.
- Added support for custom PIP indexes for more flexible Python package sourcing.
- Enabled support for using the host's PIP cache to reduce network usage and speed up dependency installation.
- Added a new Forge makefile target to update all Forge-related files in one operation.
- Set `PIP_PREFER_BINARY=1` in Forge to prefer binary wheels over source builds for faster installs.


Docker
^^^^^^

- Added support for a configurable `env_file` in Docker Compose via the `MAYAN_DOCKER_ENV_FILE` environment variable. This defaults to `.env` for complete compatibility. This change affects **only** the environment variables passed to the Mayan EDMS stack, not those passed to the Docker Compose file itself.
- Added support for an optional `.env-local` file for the Mayan EDMS Docker Compose setup to allow per-environment overrides.
- Removed the obsolete Docker Compose `version` key to align with current Compose specifications.


Backends
^^^^^^^^

- Improved resilience of `backend.model_mixins.get_backend_class_label` by ensuring it no longer errors out when encountering old module paths.


Settings
^^^^^^^^
- Fixed internal interface usage in the `settings_show` management command, ensuring accurate display of configuration settings.


Removals
--------

.. include:: partials/removals-4.6.txt


Backward incompatible changes
-----------------------------

.. include:: partials/backward-incompatible-4.6.txt


Deprecations
------------

.. include:: partials/deprecations-4.6.txt


Issues closed
-------------

- None

.. _PyPI: https://pypi.python.org/pypi/mayan-edms/
