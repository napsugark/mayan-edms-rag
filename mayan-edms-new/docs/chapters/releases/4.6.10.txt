Version 4.6.10
==============

Released: September 23, 2025


Summary
-------

Version 4.6.10 delivers important search backend improvements, introduces a
new configurable search results limit behavior, and brings multiple
refinements to forms, views, and project compliance.

It also updates dependencies, Docker images, and CI/CD configuration,
making this a well-rounded maintenance release that improves both user
experience and developer workflows.


Changes
-------

Search
^^^^^^
- Fixed the base search class `_search` interface to ensure consistent
  behavior across search backends.
- Added the setting `SEARCH_QUERY_RESULTS_LIMIT_ERROR`:

  - Controls whether an error is raised when the number of search results
    exceeds `SEARCH_QUERY_RESULTS_LIMIT`.
  - Defaults to `True` for backwards compatibility.


User Interface
^^^^^^^^^^^^^^
- Fixed the label of the index template return link for clearer navigation.
- Improved the error message when a form fieldset mismatch exception occurs,
  providing more helpful debugging information.
- Changed the statistics view icon to a facet link for consistency with the
  rest of the interface.


Packaging & Compliance
^^^^^^^^^^^^^^^^^^^^^^
- Stopped appending the changelog to the PyPI package description, keeping
  metadata concise.
- Added an SPDX license expression to the package metadata in compliance with
  PEP 639.
- Resolve a myriad of bugs and dependency conflict bugs between
  `devpi-server`, `packaging`, `setuptools`, `twine`, `wheel`.


Continuous Integration
^^^^^^^^^^^^^^^^^^^^^^
- Updated the GitLab CI template to accept `GITLAB_CI_BRANCH_TRY_STAGING` as
  a variable, instead of hardcoding the branch name. This improves
  flexibility for staging workflows.
- Invoke `twine upload` by passing `TWINE_PASSWORD` instead of `PYPIRC`.


Dependency Updates
^^^^^^^^^^^^^^^^^^
- Django: 4.2.23 to 4.2.24
- devpi-server: 6.5.0 to 6.17.0
- ipython: 8.21.0 to 9.5.0
- packaging: 21.3 to 25.0
- pip: 24.3 to 25.2
- sentry-sdk: 2.35.0 to 2.38.0
- setuptools: 69.5.1 to 80.9.0
- twine: 5.1.1 to 6.2.0
- wheel: 0.42.0 to 0.45.1


Docker Image Updates
^^^^^^^^^^^^^^^^^^^^
- Debian: 12.11-slim to 12.12-slim
- Elasticsearch: 7.17.28 to 7.17.29
- PostgreSQL: 13.21-alpine to 13.22-alpine
- Forge Ubuntu: 24.04 to noble-20250910
