Version 4.6.9
=============

Released: August 31, 2025


Summary
-------

This release strengthens the Docker build and Forge environments, introduces CI/CD enhancements for GitOps, add compliance with PEP 625, and improves both testing performance and logging clarity. It also backports fixes from the 4.8 and 4.9 series, ensuring consistent behavior across branches. Developers benefit from faster test execution, refined configuration handling, and a more flexible Docker setup.


Changes
-------

Backports
^^^^^^^^^

- From 4.9 series:

  - Updated translation file detection to include all JavaScript files.
  - Fixed a missing `super().tearDown` call in a task manager test.
  - Added documentation step to keep Forge files updated.
  - Included the version string as part of the Forge virtualenv naming.
  - Optimized `RandomPrimaryKeyModelMonkeyPatchMixin`: now uses an optimistic approach, only falling back to database introspection on random primary key collisions. This change improves test suite performance by 11-20% faster execution times.

- From 4.8 series:

  - Ensured the success icon persists after file uploads, improving user feedback consistency.


Continuous Integration & GitOps
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

- Added the Docker DIND service to all Docker push jobs for more consistent builds.
- Introduced a new GitOps branch and target to build and test Docker images in staging environments before deployment.


Forge Environment
^^^^^^^^^^^^^^^^^

- Consolidated `ENV` statements for cleaner and more efficient Dockerfiles.
- Added global `DEBIAN_FRONTEND=noninteractive` to reduce duplication and streamline apt operations.
- Set `PIP_PREFER_BINARY=1` to prefer binary wheels during package installation for faster builds.
- Updated Forge Docker Compose with an optional volume mount to support Docker Out of Docker (DOoD) scenarios.


Docker Build System
^^^^^^^^^^^^^^^^^^^

- Consolidated `ENV` statements to simplify image definitions.
- Added global `DEBIAN_FRONTEND=noninteractive` to improve package installation consistency.
- Set `PIP_PREFER_BINARY=1` to prefer binary wheels across Docker builds.
- Made `setuptools` a required dependency for both builds and virtual environments.
- Removed `wheel` installation from the Docker build job to streamline the build process.
- Add `setuptools` to the DockerFile build image to ensure compliance with
  PEP 625.


Core Application & Configuration
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

- Updated `EnvironmentFileLoader` to ignore empty configuration lines, avoiding unnecessary parsing issues.
- Revised logging levels:

  - Reduced severity for certain non-critical messages that were confusing users.
  - Increased severity for base configuration problems, including Celery component issues and lock manager errors, making them more visible in diagnostics.
