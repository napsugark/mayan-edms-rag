Version 4.6.8
=============

Released: August 24, 2025


Summary
-------

Version 4.6.8 introduces important updates to the Mayan Forge development environment, enhancements to the config environment variable handling, performance improvements in database migrations, and a major upgrade to the Sentry SDK. This release also includes new project-level documentation such as a trademark policy and citation metadata, ensuring stronger governance and academic usability.


Changes
-------

Mayan Forge
^^^^^^^^^^^

Enhancements to the Forge Docker-based development environment include:

- Added the Transifex CLI utility to support translation workflows directly within the Forge container.
- Preserved seeded APT list files to reduce redundant package updates and improve build consistency.
- Created the Python virtualenv inside the Docker image to provide a cleaner, more reproducible environment.
- Preinstalled platform-level Python packages with exact version pinning (setuptools, fancycompleter) to ensure stable builds.
- Preinstalled gettext to support translation and internationalization workflows out of the box.


Configuration & Environment Handling
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

- Reinforced load_env_file to correctly support environment variable values that contain equal signs (=).
- Prevented loading of the unprocessed `config.env` file to avoid conflicts with finalized configuration files.
- Added support for using the CLI version of the Docker image when the full Docker daemon is not required, improving efficiency.
- Stopped loading the Docker-in-Docker (DIND) image as a service, reducing overhead in CI/CD environments.


Database & Performance
^^^^^^^^^^^^^^^^^^^^^^

Optimized file metadata migration 0011, significantly improving execution speed on large databases. On tests with 5 million document pages migration times saw a 24x speedup.


Dependencies
^^^^^^^^^^^^

Upgraded sentry-sdk from 1.40.6 to 2.35.0, ensuring compatibility with the latest Sentry features and providing more comprehensive error tracking.


Documentation & Governance
^^^^^^^^^^^^^^^^^^^^^^^^^^

- Added a trademark policy document to clarify permitted use of the Mayan EDMS name and branding.
- Backported the `CITATION.cff` file to allow proper academic citation of Mayan EDMS in research publications.
